html
  head
    title= presentation.title
    link( rel='stylesheet', type='text/css', href='/ui/presentation.css' ) 
    link( rel='stylesheet', type='text/css', href=stylesheet ) 
    link( rel='stylesheet', type='text/css', href='/codemirror/lib/codemirror.css' )
    

  body( class=( leader ? 'leader' : 'user' ) )

    #container
      .content
        #header
        #extra-1
        #extra-2
        #extra-3
        #slide
        #test
        #results
        #preview
        #rankings

    #footer

    - if ( leader )
        a#remote( href=remote_url, target='_blank' ) Remote
    
    //- a general slide
    | <script id="template_slide" type="text/template" >
    |   <div class="content" >{{{ content }}}</div>
    | </script>

    //- a preview result
    | <script id="template_preview" type="text/template" >
    |   <div class="content" >
    |     <a href="{{ url }}" target="_blank" >Open in new window</a>
    |     <iframe src="{{ url }}" ></iframe>
    |   </div>
    | </script>

    //- displaying a test and editor
    | <script id="template_test" type="text/template" >
    |   <div class="content" >
    |     <h1>{{ title }}</h1>
    |     <div>{{{ explanation }}}</div>
    |   </div>
    | 
    |   <div id="editor" >
    |     <div class="toolbar" >
    |       
    |       <ul class="tabs" >
    |       {{# each zones }}
    |         <li for="{{ for }}" >{{ name }}</li>
    |       {{/ each }}
    |       </ul>
    | 
    |       <div class="actions" >
    |         <button class="submit" >Submit</button>
    |         <button class="preview" >Preview</button>
    |       </div>
    |     </div>
    | 
    |     <div class="editors" >
    |     {{# each zones }}
    |       <div for="{{ for }}" syntax="{{ syntax }}" class="editor" >
    |       </div>
    |     {{/ each }}
    |     </div>
    |   </div>
    | </script>

    //- participant results for tests
    | <script id="template_results" type="text/template">
    |   <div class="dialog" >
    |     <div class="container" >
    |       <h2>Test Results</h2>      
    |       <h5>{{ title }}</h5>
    |       <ul class="grade rank-{{ score }}" >
    |         <li class="rank-1" ></li>
    |         <li class="rank-2" ></li>
    |         <li class="rank-3" ></li>
    |       </ul>
    | 
    |       <h3>Summary</h3>
    |       <div class="view summary" >
    |         <ul>
    |           <li class="first" >
    |             <h4>{{ pass }}</h4>
    |             <div>Earned Points</div>
    |           </li>
    |           <li>
    |             <h4>{{ attempts }}</h4>
    |             <div>Total Points</div>
    |           </li>
    |           <li class="last" >
    |             <h4>{{ score }}</h4>
    |             <div>Score</div>
    |           </li>
    |         </ul>
    |       </div>
    | 
    |       <h3>Tests</h3>
    |       <div class="view tests" >
    |         {{# if tests }}
    |         {{# each tests }}
    |           <h4 class="{{# if pass }} pass {{ else }} fail {{/ if }}" ><i>{{# if pass}}g{{ else }}n{{/ if }}</i> {{ title }}</h4>
    |           <ul>
    |             {{# each tests }}
    |             <li class="{{# if pass }} pass {{ else }} fail {{/ if }}" >{{ name }}</li>
    |             {{/ each }}
    |           </ul>
    |         {{/ each}}
    |         {{ else }}
    |           <div>No tests were successfully run</div>
    |         {{/ if }}
    |       </div>
    | 
    |       <h3>Console</h3>
    |       <div class="view console" >
    |         {{# if messages }}
    |         <pre>{{ messages }}</pre>
    |         {{ else }}
    |         <pre>No console messages</pre>
    |         {{/ if }}
    |       </div>
    | 
    |     </div>
    |   </div>
    | </script>

    //- the leader board for participants
    | <script id="template_rankings" type="text/template" >
    |   <div class="content" >
    |     {{# if leaders }}
    |     <ul>
    |       <li>
    |         {{# each leaders }}
    |         {{> ranking }}
    |         {{/ each }}
    |       </li>
    |     </ul>
    |     {{/ if }}
    | 
    |     {{# if user }}
    |     <div class="current" >
    |       {{# with user }}
    |       {{> ranking }}
    |       {{/ with }}
    |       <ul>
    |         {{# each test }}
    |         {{/ each }}
    |       </ul>
    |     </div>
    |     {{/ if }}
    |   </div>
    | </script>

    //- each user listed on rankings
    | <script id="template_ranking" class="partial" type="text/template" >
    |   <div class="rank" >
    |     <img src="http://gravatar.com/avatar/{{ gravatar }}?r=g&d=blank&s=50" />
    |     <h3>{{ name }}</h3>
    |     <h4>{{ pass }} of {{ attempts }}</h4>
    |   </div>
    | </script>

    script( type='text/javascript', src='/scripts/jquery.js' )
    script( type='text/javascript', src='/codemirror/lib/codemirror.js' )
    script( type='text/javascript', src='/codemirror/addon/runmode/runmode.js' )
    script( type='text/javascript', src='/scripts/handlebars.js' )
    script( type='text/javascript', src='/scripts/markdown.js' )
    script( type='text/javascript', src='/scripts/mousetrap.js' )
    script( type='text/javascript', src='/scripts/app.js' )


